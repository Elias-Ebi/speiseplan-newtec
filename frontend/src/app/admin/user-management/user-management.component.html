<div class="content-container">
  <div class="title-action-container">
    <div class="title-container">
      <h2>Nutzerverwaltung</h2>
      <div class="search-container">
        <mat-form-field color="primary" class="search-form-field">
          <div class="input-content">
            <mat-icon>search</mat-icon>
            <input matInput (keyup)="applySearch()" [(ngModel)]="searchValue" placeholder="Suchen" #input>
          </div>
        </mat-form-field>
      </div>
    </div>
    <hr class="bg-neutral" />
  </div>
  <div class="table-container">
    <mat-tab-group [(selectedIndex)]="selectedTabIndex" (selectedTabChange)="onTabChange()">
      <mat-tab label="Admins">
        <table mat-table [dataSource]="adminDataSource" matSort>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <h2>Benutzername</h2>
            </th>
            <td mat-cell *matCellDef="let row"> {{row.name}} </td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <h2>E-Mail</h2>
            </th>
            <td mat-cell *matCellDef="let row"> {{row.email}} </td>
          </ng-container>

          <ng-container matColumnDef="aktion">
            <th mat-header-cell *matHeaderCellDef class="action-column">
              <h2>Aktion</h2>
            </th>
            <td mat-cell *matCellDef="let row">
              <div class="action-buttons">
                <button mat-icon-button color="primary" matTooltip="Adminrechte entziehen" matTooltipPosition="left"
                  class="icon-button-outlined" (click)="toggleAdminAccess(row.email)">
                  <mat-icon>key_off</mat-icon>
                </button>
                <button mat-icon-button class="icon-button" color="primary" matTooltip="Entfernen"
                  matTooltipPosition="right">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedData"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedData;"></tr>

          <tr class="mat-row" *matNoDataRow>
            <td style="text-align: left;" class="mat-cell" colspan="1">{{input.value.length == 0 ? "Es sind keine Nutzer
              vorhanden." : "Es existiert kein Eintrag mit \""+input.value+"\""}}</td>
          </tr>
        </table>

        <mat-paginator #adminPaginator [pageSizeOptions]="[5, 10, 25, 100]"
          aria-label="Wähle Anzahl der Nutzer aus"></mat-paginator>
      </mat-tab>
      <mat-tab label="Nutzer">
        <table mat-table [dataSource]="nonAdminDataSource" matSort>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <h2>Benutzername</h2>
            </th>
            <td mat-cell *matCellDef="let row"> {{row.name}} </td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              <h2>E-Mail</h2>
            </th>
            <td mat-cell *matCellDef="let row"> {{row.email}} </td>
          </ng-container>

          <ng-container matColumnDef="aktion">
            <th mat-header-cell *matHeaderCellDef class="action-column">
              <h2>Aktion</h2>
            </th>
            <td mat-cell *matCellDef="let row">
              <div class="action-buttons">
                <button mat-icon-button color="primary" matTooltip="Adminrechte vergeben" matTooltipPosition="left"
                  class="icon-button-outlined" (click)="toggleAdminAccess(row.email)">
                  <mat-icon>key</mat-icon>
                </button>
                <button mat-icon-button class="icon-button" color="primary" matTooltip="Entfernen"
                  matTooltipPosition="right">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedData"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedData;"></tr>

          <tr class="mat-row" *matNoDataRow>
            <td style="text-align: left;" class="mat-cell" colspan="1">{{input.value.length == 0 ? "Es sind keine Nutzer
              vorhanden." : "Es existiert kein Eintrag mit \""+input.value+"\""}}</td>
          </tr>
        </table>

        <mat-paginator #nonAdminPaginator [pageSizeOptions]="[5, 10, 25, 100]"
          aria-label="Wähle Anzahl der Nutzer aus"></mat-paginator>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
