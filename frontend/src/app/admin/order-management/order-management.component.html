<mat-drawer-container class="drawer-container">
  <mat-drawer #drawer class="drawer" mode="side">
    <div class=" list-container-wide">
      <div class="section-headline-container">
        <h2 class="clr-black">Filter</h2>
        <button class="close-filter-btn" (click)="toggleFilter()" mat-icon-button>
          <mat-icon>close</mat-icon>
        </button>
      </div>

      <div class="filter-form-fields">
        <mat-form-field>
          <mat-label>Besteller</mat-label>
          <input (keyup)="filterOrdersByBuyer($event)" [(ngModel)]="filter.buyerFilter" matInput/>
          <button
            (click)="removeFilterBuyer()"
            *ngIf="filter.buyerFilter"
            mat-icon-button
            matSuffix
          >
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Gast</mat-label>
          <input (keyup)="filterOrdersByGuest($event)" [(ngModel)]="filter.guestFilter" matInput/>
          <button
            (click)="removeFilterGuest()"
            *ngIf="filter.guestFilter"
            mat-icon-button
            matSuffix
          >
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Menü</mat-label>
          <input (keyup)="filterOrdersByMenu($event)" [(ngModel)]="filter.mealFilter" matInput/>
          <button
            (click)="removeFilterMenu()" 
            *ngIf="filter.mealFilter"
            mat-icon-button
            matSuffix
          >
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <hr>

      <mat-slide-toggle
        (change)="toggleDateIntervalMode()"
        [checked]="useDateInterval"
        color="primary"
        labelPosition="before"
      >
        Datumsspanne
      </mat-slide-toggle>
        
      <mat-calendar  *ngIf="!useDateInterval" [selected]="selectedDate" (selectedChange)="filterOrdersByDate($event)"> </mat-calendar>
      <mat-calendar  *ngIf="useDateInterval" 
      [selected]="selectedRangeValue"
      (selectedChange)="selectedChange($event)"> 
    </mat-calendar>
    <div *ngIf="filter.dateFilter.startDate" (click)="removeFilterDate()" class="icon-with-text filter-button">
      <mat-icon>close</mat-icon>
      <p>Datumsfilter entfernen</p>
    </div>
    
    </div>
  </mat-drawer>

  <div class="content-wrapper">
    <section>
      <!-- UI above table -->
      <div class="ui-container">
        <div (click)="toggleFilter()" class="icon-with-text filter-button">
          <mat-icon>filter_alt</mat-icon>
          <p>Filter</p>
        </div>

        <div class="list-container">
          <mat-slide-toggle
            (change)="toggleEditMode()"
            [checked]="editMultipleOrders"
            color="primary"
            labelPosition="before"
          >
            Mehrere Stornieren
          </mat-slide-toggle>

          <button *ngIf="editMultipleOrders" (click)="openCancelMultipleDialog()" [disabled]="checkedOrders.length === 0" [@fadeInOut] color="primary" mat-flat-button>
            <mat-icon>edit</mat-icon>
            Markierte stornieren
          </button>
        </div>
      </div>

      <table [dataSource]="dataSource" class="bg-background" mat-table>
        <!-- Date Column -->
        <ng-container matColumnDef="date">
          <th *matHeaderCellDef mat-header-cell>
            <h2>Datum</h2>
          </th>
          <td *matCellDef="let element" mat-cell>{{  temporal.PlainDate.from(element.date) | fullDate}}</td>
        </ng-container>

        <!-- Buyer Column -->
        <ng-container matColumnDef="buyer">
          <th *matHeaderCellDef mat-header-cell>
            <h2>Besteller</h2>
          </th>
          <td *matCellDef="let element" mat-cell>{{ element.profile.name }}</td>
        </ng-container>

        <!-- Meals Column -->
        <ng-container matColumnDef="meals">
          <th *matHeaderCellDef mat-header-cell>
            <h2>Menü</h2>
          </th>
          <td *matCellDef="let element" mat-cell>
            <div class="icon-with-text">
              <mat-icon>restaurant</mat-icon>
              <p>{{ element.meal.name }} </p>
            </div>
          </td>
        </ng-container>

        <!-- Guest Column -->
        <ng-container matColumnDef="guest">
          <th *matHeaderCellDef mat-header-cell>
            <h2>Gast</h2>
          </th>
          <td *matCellDef="let element" mat-cell>{{ element.guestName }}</td>
        </ng-container>


        <!-- Aktion Clomuns Single -->
        <ng-container matColumnDef="action-single">
          <th *matHeaderCellDef class="action-column" mat-header-cell>
            <h2>Aktion</h2>
          </th>
          <td *matCellDef="let element" mat-cell>
            <div class="action-buttons">

              <button (click)="openCancelDialog(element)" class="icon-button" mat-icon-button>
                <mat-icon>no_food</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Aktion Clomuns Multiple -->
        <ng-container matColumnDef="action-multiple">
          <th *matHeaderCellDef class="action-column" mat-header-cell>
            <h2>Aktion</h2>
          </th>
          <td *matCellDef="let element" class="action-column" mat-cell>
            <mat-checkbox (change)="checkOrders($event.checked, element)" color="primary"></mat-checkbox>
          </td>
        </ng-container>

        <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
        <tr *matRowDef="let row; columns: displayedColumns" mat-row></tr>
      </table>

      <mat-paginator class="paginator"
        [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons
      >
      </mat-paginator>
    </section>
  </div>
</mat-drawer-container>
